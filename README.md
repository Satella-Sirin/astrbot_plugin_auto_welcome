# 自动欢迎插件

**作者**：Satella-Sirin  
**版本**：1.0.0  
**描述**：在指定群聊中自动欢迎新成员，支持白名单群、自定义欢迎消息，并允许使用自定义符号将一条消息拆分成多条独立发送。

## ✨ 功能特性

- 监听群成员增加事件，自动发送欢迎消息
- 支持**白名单群**配置（只有设定的群才会触发）
- 欢迎消息支持 `{nickname}` 变量，自动替换为新成员昵称（优先使用群名片）
- **可自定义分段符号**：通过设置分隔符，将一条消息按符号拆分为多条独立消息发送（符号本身不会保留）
- 提供 WebUI 配置界面，无需手动编辑文件
- 稳健的异常处理和兼容性设计，适应不同协议适配器

## 📦 安装方法

### 方法一：通过 AstrBot 插件市场安装（推荐）
1. 打开 AstrBot WebUI，进入“插件管理”
2. 点击“插件市场”，搜索“自动欢迎”
3. 点击“安装”，安装后启用插件即可

### 方法二：手动上传
1. 准备以下三个文件：
   - `main.py`
   - `metadata.yaml`
   - `_conf_schema.json`
2. 将这三个文件放在同一文件夹内，压缩为 ZIP 包
3. 在 AstrBot WebUI 的“插件管理”中，点击“上传插件”，选择 ZIP 包上传
4. 上传后启用插件

## ⚙️ 配置说明

插件安装并启用后，您可以通过两种方式配置：

### 1. WebUI 配置（推荐）
- 在“插件管理”页面找到“自动欢迎”插件，点击右侧的“配置”按钮
- 在弹出的配置界面中设置：
  - **启用自动欢迎的群号列表**：每行输入一个 QQ 群号（纯数字）
  - **欢迎消息模板**：输入您想要发送的欢迎内容，支持 `{nickname}` 变量，段落内可直接换行（按回车键）
  - **分段符号（可选）**：若您希望将一条消息拆分成多条发送，可在此填入一个自定义分隔符，例如 `---` 或 `[split]`。插件会按此符号将消息拆分为多段，每段作为一条独立消息发送，符号本身不会出现在消息中。留空则不分段，整条消息一次发送。
- 点击“保存”，配置立即生效，无需重启

### 2. 手动编辑配置文件
配置文件位于 `/AstrBot/data/cmd_config/auto_welcome.json`，格式如下：
```json
{
  "target_groups": [12345678, 87654321],
  "welcome_message": "欢迎 {nickname} 加入本群！\n请先阅读群规。\n---\n感谢您的配合！",
  "segment_separator": "---"
}
